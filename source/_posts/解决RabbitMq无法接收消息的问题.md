---
title: 解决RabbitMq无法接收消息的问题
date: 2017-12-02 17:18:57
tags: RabbitMQ
toc: true
categories: 消息队列
---
前两天在产品迭代过程中遇到一个问题，再往RabbitMQ发送消息的时候，消息无法进入到队列里；

最开始，我以为是服务瞬间消费掉了，消费端出现了啥问题导致被消费的消息没进入到数据库中，但是，我分析消费端代码和异常信息，都没有发现消费端有啥问题；

于是，我先把RabbitMQ消费端停掉，继续发送消息，发现消息压根就没进入到队列里，刨除掉了消费端的问题；然后接着分析发送端代码，感觉一切也ok呀，没有啥问题；刨除掉自己代码的问题，那只有一种可能会不会是RabbitMQ服务出问题了，不接受消息了...
<!--more-->

然后，查看RabbitMQ服务器内存、CPU、磁盘后发现，内存、CPU指标正常，磁盘的剩余空间只剩下500M左右，通过RabbitMQ网站发现另一个队列堆积了大量的消息并且没有消费端，找到了相应的负责人后，把消息处理掉，瞬间就好使了。附上一张图：
![](https://i.imgur.com/CKuo2o2.png)
当途中圈出来的变成<font color=red>红色</font>的时候说明你的磁盘空间不够用了，估计就是消息堆积导致的.

另外：正常情况在生产环境下都会设置报警机制，RabbitMQ服务端默认配置是当内存使用达到40%，磁盘空闲空间小于50M，即启动内存报警，磁盘报警；由于我上述问题是在测试环境下遇到的，测试环境没有设置报警机制。